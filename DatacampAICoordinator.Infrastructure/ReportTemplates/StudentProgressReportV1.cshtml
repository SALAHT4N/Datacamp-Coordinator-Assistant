@model DatacampAICoordinator.Infrastructure.DTOs.StudentProgressReportDto
@{
    Layout = null; // keep it standalone
    string fmt(DateTime? d) => d?.ToString("yyyy-MM-dd HH:mm") ?? "";
}

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Student Progress Report</title>
<style>
  body { font-family: Arial, sans-serif; margin: 24px; }
  h1 { margin-bottom: 0; }
  .meta { color: #555; margin-bottom: 16px; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ddd; padding: 8px; font-size: 14px; }
  th { background: #f4f4f4; text-align: left; }
  .muted { color: #777; font-size: 12px; }
</style>
</head>
<body>
  <h1>Student Progress Report</h1>
  <div class="meta">
    Process ID: <strong>@Model.ProcessId</strong><br/>
    Run: <strong>@fmt(Model.ProcessRunDate)</strong><br/>
    Window: <strong>@fmt(Model.ProcessInitialDate)</strong> – <strong>@fmt(Model.ProcessFinalDate)</strong>
  </div>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Student</th>
        <th>Email</th>
        <th>Courses Δ</th>
        <th>Chapters Δ</th>
        <th>XP Δ</th>
        <th>Notes</th>
        <th>Active</th>
      </tr>
    </thead>
    <tbody>
    @if (Model.ProgressEntries != null && Model.ProgressEntries.Any())
    {
        var i = 1;
        foreach (var e in Model.ProgressEntries)
        {
            <tr>
              <td>@i</td>
              <td>@e.FullName<br/><span class="muted">@e.DatacampId (@e.Slug)</span></td>
              <td>@e.Email</td>
              <td>@e.DifferenceOfCourses</td>
              <td>@e.DifferenceOfChapters</td>
              <td>@e.DifferenceOfXp</td>
              <td>@e.Notes</td>
              <td>@(e.IsActive ? "Yes" : "No")</td>
            </tr>
            i++;
        }
    }
    else
    {
        <tr><td colspan="8" class="muted">No progress entries.</td></tr>
    }
    </tbody>
  </table>
</body>
</html>
